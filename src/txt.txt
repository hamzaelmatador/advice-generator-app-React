import React, { useState } from "react";
import axios from "axios";
import iconDice from "./images/icon-dice.svg";
import divDesc from "./images/pattern-divider-desktop.svg";
import divMob from "./images/pattern-divider-mobile.svg";

function App() {
  const [advice, setAdvice] = useState("");
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);

  const fetchAdvice = () => {
    setLoading(true);
    setError(null);
    axios
      .get("https://api.adviceslip.com/advice")
      .then((response) => {
        setAdvice(response.data.slip);
        setLoading(false);
      })
      .catch((error) => {
        console.error("Error fetching advice:", error);
        setError("Failed to fetch advice. Please try again.");
        setLoading(false);
      });
  };

  return (
    <div className="App">
      <p>
        ADVICE {"  "}#{advice ? advice.id : ""}
      </p>
      <h1>
        {loading
          ? "Loading..."
          : error
          ? error
          : advice.advice
          ? advice.advice
          : "Click on the dice to get a random advice"}
      </h1>
      <img src={divDesc} alt="pattern-divider" id="divider" />
      <button onClick={fetchAdvice}>
        <img src={iconDice} alt="icon-dice" id="dice-icon" />
      </button>
    </div>
  );
}

export default App;
